namespace SpriteKind {
    export const Ball = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Ball, function (sprite, otherSprite) {
    Ball2.setPosition(randint(0, 79), randint(0, 119))
})
scene.onHitWall(SpriteKind.Ball, function (sprite, location) {
    Bounce_counter += 1
    if (Bounce_counter > 1) {
        Bounce_counter += 1
        Player_points += 1
        Ball_no += 1
    }
    if (Ball_no % 2 > 0) {
        controller.moveSprite(Opponent_racket, 0, 0)
        pauseUntil(() => Ball2.overlapsWith(Opponent_racket))
        Bounce_counter = 0
    } else {
        controller.moveSprite(Player_racket, 0, 0)
        pauseUntil(() => Ball2.overlapsWith(Player_racket))
        Bounce_counter = 0
    }
})
let Player_points = 0
let Ball_no = 0
let Bounce_counter = 0
let minY = 0
let minX = 0
let Opponent_racket: Sprite = null
let Player_racket: Sprite = null
let Ball2: Sprite = null
scene.setBackgroundImage(assets.image`Table tennis table`)
Player_racket = sprites.create(img`
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ..........................................fffff.....................................................
    ........................................ff22222ff...................................................
    ......................................ff222222222ff.................................................
    ....................................ff2222222222222ff...............................................
    ...................................f2222222222222222ff..............................................
    ..................................f22222222222222222fdf.............................................
    ..................................f22222222222222222fdf.............................................
    .................................f222222222222222222fddf............................................
    .................................f222222222222222222fddf............................................
    ................................f2222222222222222222fdddf.ffffffff..................................
    ................................f2222222222222222222fddddfddddddddf.................................
    ................................f2222222222222222222fdddddddddddddf.................................
    ................................f2222222222222222222fddddfddddddddf.................................
    ................................f2222222222222222222fdddf.ffffffff..................................
    .................................f222222222222222222fddf............................................
    .................................f222222222222222222fddf............................................
    ..................................f22222222222222222fdf.............................................
    ..................................f22222222222222222fdf.............................................
    ...................................f2222222222222222ff..............................................
    ....................................ff2222222222222ff...............................................
    ......................................ff222222222ff.................................................
    ........................................ff22222ff...................................................
    ..........................................fffff.....................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    `, SpriteKind.Player)
Player_racket.setPosition(130, 55)
Opponent_racket = sprites.create(img`
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    .....................................................fffff..........................................
    ...................................................ff22222ff........................................
    .................................................ff222222222ff......................................
    ...............................................ff2222222222222ff....................................
    ..............................................ff2222222222222222f...................................
    .............................................fdf22222222222222222f..................................
    .............................................fdf22222222222222222f..................................
    ............................................fddf222222222222222222f.................................
    ...........................................fdddf2222222222222222222f................................
    ..................................ffffffff.fdddf2222222222222222222f................................
    .................................fddddddddfddddf2222222222222222222f................................
    .................................fdddddddddddddf2222222222222222222f................................
    .................................fddddddddfddddf2222222222222222222f................................
    ..................................ffffffff.fdddf2222222222222222222f................................
    ............................................fddf222222222222222222f.................................
    ............................................fddf222222222222222222f.................................
    .............................................fdf22222222222222222f..................................
    .............................................fdf22222222222222222f..................................
    ..............................................ff2222222222222222f...................................
    ...............................................ff2222222222222ff....................................
    .................................................ff222222222ff......................................
    ...................................................ff22222ff........................................
    .....................................................fffff..........................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    ....................................................................................................
    `, SpriteKind.Player)
Opponent_racket.setPosition(30, 65)
Ball2 = sprites.create(assets.image`Ball`, SpriteKind.Ball)
Ball2.setPosition(50, 75)
Ball2.setVelocity(25, 25)
let Coin_flip = randint(0, 10)
if (Coin_flip > 5) {
    game.showLongText("You start with the serve!", DialogLayout.Bottom)
    Ball2.setPosition(120, 100)
} else {
    game.showLongText("Your opponent starts with the serve!", DialogLayout.Bottom)
}
// Minimum x coordinate
// Maximum x coordinate
let maxX = 160
// Minimum y coordinate
// Maximum y coordinate
let maxY = 120
// Generate random x and y coordinates
let randomX = Math.randomRange(minX, maxX)
let randomY = Math.randomRange(minY, maxY)
// Set the ball's position to the generated random coordinates
Ball2.setPosition(randomX, randomY)
controller.player1.moveSprite(Player_racket)
controller.player2.moveSprite(Opponent_racket)
Bounce_counter = 0
Ball_no = 0
game.onUpdateInterval(5000, function () {
    Ball2.vx += Ball2.vx * 0.1
    Ball2.vy += Ball2.vy * 0.1
})
game.onUpdateInterval(100, function () {
    // Check ball position
    if (Ball2.y <= 0 || Ball2.y >= scene.screenHeight() - 1) {
        Ball2.vy *= -1;
    }
    if (Ball2.x <= 0 || Ball2.x >= scene.screenWidth() - 1) {
        Ball2.vx *= -1;
    }
})
